1526974054s:15128:"PGRpdiBzdHlsZT0iaGVpZ2h0OiA0MDBweCIgaWQ9ImluZm92aXMiPjwvZGl2Pg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9kZXYuc3RvY2tiYW5nbGFkZXNoLmNvbS9tZXRyb25pY19jdXN0b20vbWFya2V0X2ZyYW1lL3RyZWVtYXAuY3NzIiByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiAvPg0KPHNjcmlwdCBzcmM9Imh0dHBzOi8vZGV2LnN0b2NrYmFuZ2xhZGVzaC5jb20vbWV0cm9uaWNfY3VzdG9tL21hcmtldF9mcmFtZS9qaXQteWMuanMiPjwvc2NyaXB0Pg0KDQo8c2NyaXB0Pg0KDQp2YXIgbGFiZWxUeXBlLCB1c2VHcmFkaWVudHMsIG5hdGl2ZVRleHRTdXBwb3J0LCBhbmltYXRlOw0KDQooZnVuY3Rpb24oKSB7DQogICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCwNCiAgICAgICAgaVN0dWZmID0gdWEubWF0Y2goL2lQaG9uZS9pKSB8fCB1YS5tYXRjaCgvaVBhZC9pKSwNCiAgICAgICAgdHlwZU9mQ2FudmFzID0gdHlwZW9mIEhUTUxDYW52YXNFbGVtZW50LA0KICAgICAgICBuYXRpdmVDYW52YXNTdXBwb3J0ID0gKHR5cGVPZkNhbnZhcyA9PSAnb2JqZWN0JyB8fCB0eXBlT2ZDYW52YXMgPT0gJ2Z1bmN0aW9uJyksDQogICAgICAgIHRleHRTdXBwb3J0ID0gbmF0aXZlQ2FudmFzU3VwcG9ydA0KICAgICAgICAgICAgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpLmZpbGxUZXh0ID09ICdmdW5jdGlvbicpOw0KICAgIC8vSSdtIHNldHRpbmcgdGhpcyBiYXNlZCBvbiB0aGUgZmFjdCB0aGF0IEV4Q2FudmFzIHByb3ZpZGVzIHRleHQgc3VwcG9ydCBmb3IgSUUNCiAgICAvL2FuZCB0aGF0IGFzIG9mIHRvZGF5IGlQaG9uZS9pUGFkIGN1cnJlbnQgdGV4dCBzdXBwb3J0IGlzIGxhbWUNCiAgICBsYWJlbFR5cGUgPSAoIW5hdGl2ZUNhbnZhc1N1cHBvcnQgfHwgKHRleHRTdXBwb3J0ICYmICFpU3R1ZmYpKT8gJ05hdGl2ZScgOiAnSFRNTCc7DQogICAgbmF0aXZlVGV4dFN1cHBvcnQgPSBsYWJlbFR5cGUgPT0gJ05hdGl2ZSc7DQogICAgdXNlR3JhZGllbnRzID0gbmF0aXZlQ2FudmFzU3VwcG9ydDsNCiAgICBhbmltYXRlID0gIShpU3R1ZmYgfHwgIW5hdGl2ZUNhbnZhc1N1cHBvcnQpOw0KfSkoKTsNCg0KdmFyIExvZyA9IHsNCiAgICBlbGVtOiBmYWxzZSwNCiAgICB3cml0ZTogZnVuY3Rpb24odGV4dCl7DQogICAgICAgIGlmICghdGhpcy5lbGVtKQ0KICAgICAgICAgICAgdGhpcy5lbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZycpOw0KICAgICAgICB0aGlzLmVsZW0uaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSAoNTAwIC0gdGhpcy5lbGVtLm9mZnNldFdpZHRoIC8gMikgKyAncHgnOw0KICAgIH0NCn07DQoNCmZ1bmN0aW9uIHNiVGlwKHRpcCwgbm9kZSwgaXNMZWFmLCBkb21FbGVtZW50KSB7DQogICAgdmFyIGRhdGEgPSBub2RlLmRhdGE7DQogICAgdmFyIGFycm93Q2xhc3MgPSAwIDwgZGF0YS4kcHJpY2VfY2hhbmdlX3BlciA/ICdwcmljZVVwSGVhZGVyU2VhcmNoJyA6ICgwID09IGRhdGEuJHByaWNlX2NoYW5nZV9wZXIpID8gJ3ByaWNlU3RhdGljSGVhZGVyU2VhcmNoJyA6ICdwcmljZURvd25IZWFkZXJTZWFyY2gnOw0KICAgIHZhciBodG1sID0gIjxkaXYgY2xhc3M9XCJ0aXAtd3JhcFwiPjxzcGFuIHN0eWxlPSdmb250LXdlaWdodDpib2xkJz4iICsgbm9kZS5uYW1lICsgIjwvc3Bhbj4iOw0KICAgIGlmIChkYXRhLiRwcmljZV9jaGFuZ2VfcGVyICE9IHVuZGVmaW5lZCkgew0KICAgICAgICBodG1sICs9ICImbmJzcDs8c3BhbiBjbGFzcz0nIiArIGFycm93Q2xhc3MgKyAiJz4mbmJzcDs8L3NwYW4+Jm5ic3A7ICZuYnNwOyZuYnNwOzxicj4iOw0KICAgIH0NCiAgICBpZiAoZGF0YS4kc2VjdG9yICE9IHVuZGVmaW5lZCkgew0KICAgICAgICBodG1sICs9ICI8c3BhbiBjbGFzcz0ndGlwLW5vZGUtYXR0cmlidXRlcy1zZWN0b3InPiIgKyBkYXRhLiRzZWN0b3IgKyAiPC9zcGFuPjxicj4iOw0KICAgIH0NCiAgICBpZiAoZGF0YS4kdm9sdW1lKSB7DQogICAgICAgIGh0bWwgKz0gIjxzcGFuIGNsYXNzPSd0aXAtbm9kZS1hdHRyaWJ1dGVzLWtleSc+Vm9sdW1lIDogPHNwYW4gY2xhc3M9J3RpcC1ub2RlLWF0dHJpYnV0ZXMtdmFsdWUnPiIgKyBkYXRhLiR2b2x1bWUgKyAiPC9zcGFuPjwvc3Bhbj48YnI+IjsNCiAgICB9IGVsc2UgaWYgKGRhdGEuJHR1cm5fb3Zlcikgew0KICAgICAgICBodG1sICs9ICI8c3BhbiBjbGFzcz0ndGlwLW5vZGUtYXR0cmlidXRlcy1rZXknPlR1cm5vdmVyIDogPHNwYW4gY2xhc3M9J3RpcC1ub2RlLWF0dHJpYnV0ZXMtdmFsdWUnPiIgKyBkYXRhLiR0dXJuX292ZXIgKyAiPC9zcGFuPjwvc3Bhbj48YnI+IjsNCiAgICB9IGVsc2UgaWYgKGRhdGEuJG5vX29mX3RyYWRlKSB7DQogICAgICAgIGh0bWwgKz0gIjxzcGFuIGNsYXNzPSd0aXAtbm9kZS1hdHRyaWJ1dGVzLWtleSc+VHJhZGVzIDogPHNwYW4gY2xhc3M9J3RpcC1ub2RlLWF0dHJpYnV0ZXMtdmFsdWUnPiIgKyBkYXRhLiRub19vZl90cmFkZSArICI8L3NwYW4+PC9zcGFuPjxicj4iOw0KICAgIH0NCiAgICBpZiAoZGF0YS4kcHJpY2UgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGh0bWwgKz0gIjxzcGFuIGNsYXNzPSd0aXAtbm9kZS1hdHRyaWJ1dGVzLWtleSc+Q3VycmVudCBQcmljZSA6IDxzcGFuIGNsYXNzPSd0aXAtbm9kZS1hdHRyaWJ1dGVzLXZhbHVlJz4iICsgZGF0YS4kcHJpY2UgKyAiPC9zcGFuPjwvc3Bhbj48YnI+IjsNCiAgICB9DQogICAgaWYgKGRhdGEuJHByaWNlX2NoYW5nZV9wZXIgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGh0bWwgKz0gIjxzcGFuIGNsYXNzPSd0aXAtbm9kZS1hdHRyaWJ1dGVzLWtleSc+Q2hhbmdlIFBlcmNlbnQgOiA8c3BhbiBjbGFzcz0ndGlwLW5vZGUtYXR0cmlidXRlcy12YWx1ZSc+IiArIGRhdGEuJHByaWNlX2NoYW5nZV9wZXIgKyAiICUgPC9zcGFuPjwvc3Bhbj48YnI+IjsNCiAgICB9DQogICAgaHRtbCArPSAiPC9kaXY+IjsNCiAgICB0aXAuaW5uZXJIVE1MID0gaHRtbDsNCn0NCg0KZnVuY3Rpb24gc2V0Rm9udFNpemUobm9kZSkgew0KICAgIHZhciBub09mQ2hhcmFjdGVycyA9IG5vZGUubmFtZS5sZW5ndGg7DQogICAgdmFyIGxhYmVsRWxlbWVudFdpZHRoID0gcGFyc2VJbnQobm9kZS5lbmREYXRhLiR3aWR0aCk7DQogICAgdmFyIHByb3Bvc2luZ0ZvbnRTaXplOw0KICAgIHByb3Bvc2luZ0ZvbnRTaXplID0gcGFyc2VJbnQobGFiZWxFbGVtZW50V2lkdGggLyBub09mQ2hhcmFjdGVycyk7DQogICAgcHJvcG9zaW5nRm9udFNpemUgPSBwYXJzZUludChwcm9wb3NpbmdGb250U2l6ZSAqICgxLjEyKSk7DQogICAgcmV0dXJuIHByb3Bvc2luZ0ZvbnRTaXplOw0KfQ0KDQpmdW5jdGlvbiBpbml0KCl7DQogICAgLy9pbml0IGRhdGENCiAgICB2YXIgTElHSFRfUkVEID0gImxpZ2h0LXJlZCI7DQogICAgdmFyIERBUktfUkVEID0gImRlZXAtcmVkIjsNCiAgICB2YXIgREFSSyA9ICJkYXJrIjsNCiAgICB2YXIgREFSS19HUkVFTiA9ICJkZWVwLWdyZWVuIjsNCiAgICB2YXIgTElHSFRfR1JFRU4gPSAibGlnaHQtZ3JlZW4iOw0KICAgIHZhciBFWENIQU5HRV9BUkVBID0gMTUuMDE3Ow0KDQogICAgdmFyIEZPTlRfVEhSRVNIT0xEX01JTl9TSVpFID0gNzsNCiAgICB2YXIgUkVEVUNFID0gMzsNCiAgICB2YXIgUFVTSF9WQUwgPSA0Ow0KICAgIHZhciBjb250YWluZXJIZWlnaHQgPSAkaml0LmlkKCdpbmZvdmlzJykub2Zmc2V0SGVpZ2h0Ow0KICAgIHZhciBjb250YWluZXJXaWR0aCA9ICRqaXQuaWQoJ2luZm92aXMnKS5vZmZzZXRXaWR0aDsNCiAgICB2YXIgY29udGFpbmVyQXJlYSA9IGNvbnRhaW5lckhlaWdodCAqIGNvbnRhaW5lcldpZHRoOw0KDQogICAgdmFyIGpzb24gPSB7ImRhdGEiOnsiJGNsYXNzIjoiZXhjaG5hZ2UifSwiaWQiOiJyb290IiwibmFtZSI6IkRoYWthIFN0b2NrIEV4Y2hhbmdlIiwiY2hpbGRyZW4iOlt7ImNoaWxkcmVuIjpbeyJjaGlsZHJlbiI6W10sImRhdGEiOnsicGxheWNvdW50IjoyMDgsIiRjb2xvciI6IiNBQTU0MzIiLCIkY2xhc3MiOiJzdG9jayIsIiRzeW1ib2wiOiJBUkFNSVRDRU0iLCIkcHJpY2UiOjIzLjQsIiRzZWN0b3IiOiJDZW1lbnQiLCIkdm9sdW1lIjoxNTkxMywiJG5vX29mX3RyYWRlIjoyNCwiJHR1cm5fb3ZlciI6MC4zNzIsIiRwcmljZV9jaGFuZ2UiOjAuMiwiJHByaWNlX2NoYW5nZV9wZXIiOjAuODYsIiRpbWFnZSI6IiMiLCIkYXJlYSI6MC4zNzJ9LCJpZCI6ImRzZV8yQVJBTUlUQ0VNIiwibmFtZSI6IkFSQU1JVENFTSJ9LHsiY2hpbGRyZW4iOltdLCJkYXRhIjp7InBsYXljb3VudCI6MjA4LCIkY29sb3IiOiIjQUE1NDMyIiwiJGNsYXNzIjoic3RvY2siLCIkc3ltYm9sIjoiQ09ORklEQ0VNIiwiJHByaWNlIjoxNDYuNSwiJHNlY3RvciI6IkNlbWVudCIsIiR2b2x1bWUiOjM0ODQ3LCIkbm9fb2ZfdHJhZGUiOjYyLCIkdHVybl9vdmVyIjo1LjA1NiwiJHByaWNlX2NoYW5nZSI6MS41LCIkcHJpY2VfY2hhbmdlX3BlciI6MS4wMywiJGltYWdlIjoiIyIsIiRhcmVhIjo1LjA1Nn0sImlkIjoiZHNlXzJDT05GSURDRU0iLCJuYW1lIjoiQ09ORklEQ0VNIn0seyJjaGlsZHJlbiI6W10sImRhdGEiOnsicGxheWNvdW50IjoyMDgsIiRjb2xvciI6IiNBQTU0MzIiLCIkY2xhc3MiOiJzdG9jayIsIiRzeW1ib2wiOiJIRUlERUxCQ0VNIiwiJHByaWNlIjozNTMsIiRzZWN0b3IiOiJDZW1lbnQiLCIkdm9sdW1lIjo2NDU3LCIkbm9fb2ZfdHJhZGUiOjk3LCIkdHVybl9vdmVyIjoyLjI5LCIkcHJpY2VfY2hhbmdlIjotMy40LCIkcHJpY2VfY2hhbmdlX3BlciI6LTAuOTUsIiRpbWFnZSI6IiMiLCIkYXJlYSI6Mi4yOX0sImlkIjoiZHNlXzJIRUlERUxCQ0VNIiwibmFtZSI6IkhFSURFTEJDRU0ifSx7ImNoaWxkcmVuIjpbXSwiZGF0YSI6eyJwbGF5Y291bnQiOjIwOCwiJGNvbG9yIjoiI0FBNTQzMiIsIiRjbGFzcyI6InN0b2NrIiwiJHN5bWJvbCI6IkxIQkwiLCIkcHJpY2UiOjU1LjMsIiRzZWN0b3IiOiJDZW1lbnQiLCIkdm9sdW1lIjoxMjM0OTIsIiRub19vZl90cmFkZSI6MjYyLCIkdHVybl9vdmVyIjo2Ljg2MSwiJHByaWNlX2NoYW5nZSI6MC4xLCIkcHJpY2VfY2hhbmdlX3BlciI6MC4xOCwiJGltYWdlIjoiIyIsIiRhcmVhIjo2Ljg2MX0sImlkIjoiZHNlXzJMSEJMIiwibmFtZSI6IkxIQkwifSx7ImNoaWxkcmVuIjpbXSwiZGF0YSI6eyJwbGF5Y291bnQiOjIwOCwiJGNvbG9yIjoiI0FBNTQzMiIsIiRjbGFzcyI6InN0b2NrIiwiJHN5bWJvbCI6Ik1FR0hOQUNFTSIsIiRwcmljZSI6OTMsIiRzZWN0b3IiOiJDZW1lbnQiLCIkdm9sdW1lIjo3NjEsIiRub19vZl90cmFkZSI6MTIsIiR0dXJuX292ZXIiOjAuMDcxLCIkcHJpY2VfY2hhbmdlIjotMC4zLCIkcHJpY2VfY2hhbmdlX3BlciI6LTAuMzIsIiRpbWFnZSI6IiMiLCIkYXJlYSI6MC4wNzF9LCJpZCI6ImRzZV8yTUVHSE5BQ0VNIiwibmFtZSI6Ik1FR0hOQUNFTSJ9LHsiY2hpbGRyZW4iOltdLCJkYXRhIjp7InBsYXljb3VudCI6MjA4LCIkY29sb3IiOiIjQUE1NDMyIiwiJGNsYXNzIjoic3RvY2siLCIkc3ltYm9sIjoiTUlDRU1FTlQiLCIkcHJpY2UiOjgwLjQsIiRzZWN0b3IiOiJDZW1lbnQiLCIkdm9sdW1lIjozODYwLCIkbm9fb2ZfdHJhZGUiOjM4LCIkdHVybl9vdmVyIjowLjMwNywiJHByaWNlX2NoYW5nZSI6MC45LCIkcHJpY2VfY2hhbmdlX3BlciI6MS4xMywiJGltYWdlIjoiIyIsIiRhcmVhIjowLjMwN30sImlkIjoiZHNlXzJNSUNFTUVOVCIsIm5hbWUiOiJNSUNFTUVOVCJ9LHsiY2hpbGRyZW4iOltdLCJkYXRhIjp7InBsYXljb3VudCI6MjA4LCIkY29sb3IiOiIjQUE1NDMyIiwiJGNsYXNzIjoic3RvY2siLCIkc3ltYm9sIjoiUFJFTUlFUkNFTSIsIiRwcmljZSI6NzkuOCwiJHNlY3RvciI6IkNlbWVudCIsIiR2b2x1bWUiOjgwOSwiJG5vX29mX3RyYWRlIjo4LCIkdHVybl9vdmVyIjowLjA2LCIkcHJpY2VfY2hhbmdlIjo1LjMsIiRwcmljZV9jaGFuZ2VfcGVyIjo3LjExLCIkaW1hZ2UiOiIjIiwiJGFyZWEiOjAuMDZ9LCJpZCI6ImRzZV8yUFJFTUlFUkNFTSIsIm5hbWUiOiJQUkVNSUVSQ0VNIn1dLCJkYXRhIjp7InBsYXljb3VudCI6MjA4LCIkY2xhc3MiOiJzZWN0b3IiLCIkYXJlYSI6MTUuMDE3MDAwMDAwMDAwMDAxfSwiaWQiOiIyIiwibmFtZSI6IkNlbWVudCJ9XX07DQogICAgLy9lbmQNCiAgICAvL2luaXQgVHJlZU1hcA0KICAgIHZhciB0bSA9IG5ldyAkaml0LlRNLlNxdWFyaWZpZWQoew0KICAgICAgICAvL3doZXJlIHRvIGluamVjdCB0aGUgdmlzdWFsaXphdGlvbg0KICAgICAgICBpbmplY3RJbnRvOiAnaW5mb3ZpcycsDQogICAgICAgIC8vcGFyZW50IGJveCB0aXRsZSBoZWlnaHRzDQogICAgICAgIHRpdGxlSGVpZ2h0OiAxNSwNCiAgICAgICAgLy9lbmFibGUgYW5pbWF0aW9ucw0KICAgICAgICBhbmltYXRlOiBhbmltYXRlLA0KICAgICAgICAvL2JveCBvZmZzZXRzDQogICAgICAgIG9mZnNldDogMSwNCiAgICAgICAgLy9BdHRhY2ggbGVmdCBhbmQgcmlnaHQgY2xpY2sgZXZlbnRzDQogICAgICAgIEV2ZW50czogew0KICAgICAgICAgICAgZW5hYmxlOiB0cnVlLA0KICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24obm9kZSkgew0KICAgICAgICAgICAgICAgIGlmKG5vZGUpIHRtLmVudGVyKG5vZGUpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIG9uUmlnaHRDbGljazogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdG0ub3V0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGR1cmF0aW9uOiAxMDAwLA0KICAgICAgICAvL0VuYWJsZSB0aXBzDQogICAgICAgIFRpcHM6IHsNCiAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSwNCiAgICAgICAgICAgIC8vYWRkIHBvc2l0aW9uaW5nIG9mZnNldHMNCiAgICAgICAgICAgIG9mZnNldFg6IDIwLA0KICAgICAgICAgICAgb2Zmc2V0WTogMjAsDQogICAgICAgICAgICAvL2ltcGxlbWVudCB0aGUgb25TaG93IG1ldGhvZCB0bw0KICAgICAgICAgICAgLy9hZGQgY29udGVudCB0byB0aGUgdG9vbHRpcCB3aGVuIGEgbm9kZQ0KICAgICAgICAgICAgLy9pcyBob3ZlcmVkDQogICAgICAgICAgICBvblNob3c6c2JUaXANCiAgICAgICAgfSwNCiAgICAgICAgLy9BZGQgdGhlIG5hbWUgb2YgdGhlIG5vZGUgaW4gdGhlIGNvcnJlcG9uZGluZyBsYWJlbA0KICAgICAgICAvL1RoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbmNlLCBvbiBsYWJlbCBjcmVhdGlvbi4NCiAgICAgICAgLyoNCiAgICAgICAgIG9uQ3JlYXRlTGFiZWw6IGZ1bmN0aW9uKGRvbUVsZW1lbnQsIG5vZGUpew0KICAgICAgICAgZG9tRWxlbWVudC5pbm5lckhUTUwgPSBub2RlLm5hbWU7DQogICAgICAgICB2YXIgc3R5bGUgPSBkb21FbGVtZW50LnN0eWxlOw0KICAgICAgICAgc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgICAgc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB0cmFuc3BhcmVudCc7DQogICAgICAgICBkb21FbGVtZW50Lm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICBzdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICM5RkQ0RkYnOw0KICAgICAgICAgfTsNCiAgICAgICAgIGRvbUVsZW1lbnQub25tb3VzZW91dCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB0cmFuc3BhcmVudCc7DQogICAgICAgICB9Ow0KICAgICAgICAgfQ0KICAgICAgICAgfSk7Ki8NCg0KICAgICAgICBvbkNyZWF0ZUxhYmVsOiBmdW5jdGlvbihkb21FbGVtZW50LCBub2RlKSB7DQogICAgICAgICAgICBpZiAobm9kZS5kYXRhLiRjbGFzcyA9PSAnZXhjaGFuZ2UnKSB7DQogICAgICAgICAgICAgICAgZG9tRWxlbWVudC5pbm5lckhUTUwgPSBub2RlLm5hbWU7DQogICAgICAgICAgICAgICAgZG9tRWxlbWVudC5jbGFzc05hbWUgPSAibm9kZSBleGNoYW5nZSI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuZGF0YS4kY2xhc3MgPT0gJ3NlY3RvcicpIHsNCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LmlubmVySFRNTCA9IG5vZGUubmFtZTsNCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LmNsYXNzTmFtZSA9ICJub2RlIHNlY3RvciI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuZGF0YS4kY2xhc3MgPT0gJ3N0b2NrJykgew0KICAgICAgICAgICAgICAgIHZhciBjb2xvckNsYXNzID0gTElHSFRfR1JFRU47DQogICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YS4kcHJpY2VfY2hhbmdlX3BlciA8IC0yLjApIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3JDbGFzcyA9IERBUktfUkVEOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhLiRwcmljZV9jaGFuZ2VfcGVyIDwgLTApIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3JDbGFzcyA9IExJR0hUX1JFRDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuZGF0YS4kcHJpY2VfY2hhbmdlX3BlciA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3JDbGFzcyA9IExJR0hUX0dSRUVOOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhLiRwcmljZV9jaGFuZ2VfcGVyIDwgMi4wKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbG9yQ2xhc3MgPSBEQVJLX0dSRUVOOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbG9yQ2xhc3MgPSBMSUdIVF9HUkVFTjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGZvbnRTaXplQnlTZWN0b3IgPSBwYXJzZUludCgobm9kZS5kYXRhLiRhcmVhIC8gbm9kZS5kYXRhLiRzZWN0b3JBcmVhKSAqIDgwKSArIFBVU0hfVkFMOw0KICAgICAgICAgICAgICAgIHZhciBwZXJjZW50ID0gbm9kZS5kYXRhLiRwcmljZV9jaGFuZ2VfcGVyOw0KICAgICAgICAgICAgICAgIHZhciBmb250U2l6ZTsNCiAgICAgICAgICAgICAgICB2YXIgZm9udFNpemVBY2NvcmRpbmdUb1NlY3RvckFyZWEgPSBwYXJzZUludCgoKG5vZGUuZGF0YS4kYXJlYSAvIG5vZGUuZGF0YS4kc2VjdG9yQXJlYSkgKiAobm9kZS5kYXRhLiRzZWN0b3JBcmVhIC8gRVhDSEFOR0VfQVJFQSkpICogNzUwKSArIDQ7DQoNCiAgICAgICAgICAgICAgICB2YXIgZm9udFNpemVBY2NvcmRpbmdUb0VsZW1lbnRXaWR0aCA9IHNldEZvbnRTaXplKG5vZGUpOw0KICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFNpemVBY2NvcmRpbmdUb0VsZW1lbnRXaWR0aDsNCg0KICAgICAgICAgICAgICAgIHZhciBCcm93c2VyID0gew0KICAgICAgICAgICAgICAgICAgICBWZXJzaW9uOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gOTk5OyAvLyB3ZSBhc3N1bWUgYSBzYW5lIGJyb3dzZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCJNU0lFIikgIT0gLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWgsIElFIGFnYWluLCBsZXRzIGRvd25ncmFkZSB2ZXJzaW9uIG51bWJlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSBwYXJzZUZsb2F0KG5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIilbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZlcnNpb247DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoQnJvd3Nlci5WZXJzaW9uKCkgPD0gOCkgew0KDQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplID1wYXJzZUludChmb250U2l6ZUFjY29yZGluZ1RvU2VjdG9yQXJlYSAqIDQwIC8gMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGF3ID0gbm9kZS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YXcuJG5vT2ZUcmFkZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplID1wYXJzZUludChmb250U2l6ZUFjY29yZGluZ1RvU2VjdG9yQXJlYSAqIDEwMCAvIDEwMCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihkYXRhdy4kdm9sdW1lKXsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemUgPXBhcnNlSW50KGZvbnRTaXplQWNjb3JkaW5nVG9TZWN0b3JBcmVhICogOTAgLyAxMDApOw0KDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZm9udFNpemUgPSBNYXRoLm1heChmb250U2l6ZSwgRk9OVF9USFJFU0hPTERfTUlOX1NJWkUpOw0KICAgICAgICAgICAgICAgIHZhciBsYWJlbEhpZ2h0ID0gZm9udFNpemUgKiAyLjI7DQogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBub2RlLm5hbWU7DQogICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRNYXJrID0gIiUiOw0KICAgICAgICAgICAgICAgIGlmIChub2RlLmVuZERhdGEuJGhlaWdodCA8IGxhYmVsSGlnaHQpIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gIiI7DQogICAgICAgICAgICAgICAgICAgIHBlcmNlbnRNYXJrID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHBhcnNlSW50KChub2RlLmVuZERhdGEuJGhlaWdodCAvIDIpIC0gKGxhYmVsSGlnaHQgLyAyKSk7DQogICAgICAgICAgICAgICAgdmFyIHRvcCA9ICgwIDwgZGlzdGFuY2UpID8gZGlzdGFuY2UgOiA1Ow0KICAgICAgICAgICAgICAgIHZhciBmb250U2l6ZVBlcmNlbnRhZ2VMYWJlbCA9ICggRk9OVF9USFJFU0hPTERfTUlOX1NJWkUgPCBwYXJzZUludChmb250U2l6ZSAqIDAuNzUpKSA/IHBhcnNlSW50KGZvbnRTaXplICogMC43NSkgOiBGT05UX1RIUkVTSE9MRF9NSU5fU0laRTsNCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LmlubmVySFRNTCA9ICI8ZGl2IHN0eWxlPSdsaW5lLWhlaWdodDoiICsgZm9udFNpemUgKyAicHg7Zm9udC1zaXplOiIgKyBmb250U2l6ZSArICJweDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IiArIHRvcCArICJweDtjb2xvcjogI2ZmZmZmZic+IiArIG5hbWUgKyAiIDxicj48c3BhbiBjbGFzcz0ncGVyY2VudC1jbGFzcycgc3R5bGU9J2ZvbnQtc2l6ZToiICsgZm9udFNpemVQZXJjZW50YWdlTGFiZWwgKyAicHg7Jz4iICsgcGVyY2VudCArIHBlcmNlbnRNYXJrICsgIjwvc3Bhbj48L2Rpdj4iOw0KICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuY2xhc3NOYW1lID0gY29sb3JDbGFzcyArICIgbm9kZSBzdG9jayI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsNCiAgICB0bS5sb2FkSlNPTihqc29uKTsNCiAgICB0bS5yZWZyZXNoKCk7DQogICAgLy9lbmQNCg0KfQ0KaW5pdCgpOw0KDQo8L3NjcmlwdD4NCg0KDQo=";